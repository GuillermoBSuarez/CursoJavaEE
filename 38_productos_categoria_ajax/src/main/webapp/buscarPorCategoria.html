<!DOCTYPE html>
<html>
<head>
<!-- los siguiente metas son para no- cache -->
<meta http-equiv="Expires" content="0">
<meta http-equiv="Last-Modified" content="0">
<meta http-equiv="Cache-Control" content="no-cache, mustrevalidate">
<meta http-equiv="Pragma" content="no-cache"> 
<meta charset="UTF-8">
<title>Lista de productos por categoría</title>

<!-- API de JQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<style type="text/css">
body {
	color: purple;
}

h1 {
	text-align: center;
}

div {
	width: 400px;
	margin: 50px auto;
	padding: 15px;
	background-color: smocke;
	border: 1px solid purple; input { display : block;
	margin-bottom: 15px;
}

input {
	color: purple;
	margin: 0 auto;
	display: block;
	margin-bottom: 15px;
	border: 1px solid purple;
	padding: 7px;
	display: block;
}}
</style>
</head>
<body>
	<div>
		<h1>Lista de productos por categoría</h1>
		<input type="text" id="categoria" name="categoria" placeholder="Categoría del producto">
		<input type="button" id="btnMostrar" value="Mostrar">
		<br><br>
		
		<div id="tbProductos">
			
		</div>
	</div>

	<script type="text/javascript">
		$("#btnMostrar").click(lanzarPeticion);
		
		function lanzarPeticion(){
			// construcción de la url "a pelo"
			// var url ="FrontController?operation=doBuscarPorCategoria&categoria="+$("#categoria").val();

			// alternativa si hay muchos parámetros
			var url = "FrontController";
			// y se incluyen los parámetros como un json en el segundo parámetro del get:

			$.get(url,
				  {"operation":"doBuscarPorCategoria", "categoria":$("#categoria").val()},
				  function(data){
				var tabla = "<table border='1'><tr><th>Nombre</th><th>Precio</th></tr>";
				$.each(data, function(i, p){
					tabla += "<tr><td>"+p.nombre+"</td><td>"+p.precio+"</td></tr>";
				})
				tabla += "</table>";
				$("#tbProductos").html(tabla);
			});
		}
	</script>


</body>
</html> 